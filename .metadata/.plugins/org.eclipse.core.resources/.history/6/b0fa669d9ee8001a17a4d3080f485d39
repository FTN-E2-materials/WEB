package services;

import java.io.IOException;
import java.util.ArrayList;
import java.util.Date;
import java.util.List;

import com.google.gson.JsonSyntaxException;

import beans.Apartment;
import beans.ApartmentComment;
import dao.ApartmentDao;
import dto.ApartmentDTO;

public class ApartmentService {

	private ApartmentDao apartmentDao;
	
	public ApartmentService(ApartmentDao apartmentDao) {
		this.apartmentDao = apartmentDao;
	}
	
	public Apartment saveNewApartment(ApartmentDTO apartmentParameters) throws JsonSyntaxException, IOException {
		int nextID = apartmentDao.generateNextID();
		
		Apartment newApartment = new Apartment(apartmentParameters.getType(), apartmentParameters.getNumberOfRooms(), 
				apartmentParameters.getNumberOfGuests(), apartmentParameters.getLocation(), new ArrayList<ApartmentComment>(), 
				apartmentParameters.getCostForNight(), true, apartmentParameters.getCheckInTime(), apartmentParameters.getCheckOutTime());
		
		apartmentDao.save(newApartment);
		return newApartment;
	}
	
	public boolean checkIfReservedForDate(Date wantedDate) {
		return false;
	}
	
	public List<Apartment> getAllApartments() throws JsonSyntaxException, IOException {
		return apartmentDao.getAll();
	}
	
	public List<Apartment> getNewestApartments() throws JsonSyntaxException, IOException {
		return apartmentDao.getAll();
	}
	
	public List<Apartment> getMostPopularApartments() {
		return apartmentDao.getAll();
	}
}
